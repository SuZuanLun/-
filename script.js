const translations = {
    id: {
        'nav-home': 'Beranda',
        'nav-about': 'Tentang',
        'nav-projects': 'Proyek',
        'nav-contact': 'Kontak',
        'nav-blog': 'Blog',
        'hero-desc': 'Inovasi Server AI Yang Independen Tanpa Internet',
        'hero-btn-projects': 'Lihat Proyek',
        'hero-btn-contact': 'Hubungi Kami',
        'scroll-text': 'Scroll',
        'about-title': 'Tentang Kami',
        'about-desc': 'Saya Swanlun 蘇鑽輪, dari Universitas Shu De, fakultas Komputer dan komunikasi 電腦與通訊系 bekerja sama dengan Prosesor Chen Wunan 陳武男, akan membuat server AI independen.',
        'about-desc-2': 'Saya sebagai Grup B siap bekerja sama dalam membangun server AI agar lebih berkembang.',
        'projects-title': 'Proyek Kami',
        'project1-title': 'Membangun Server AI Independent & Offline',
        'project1-desc': 'Mengembangkan infrastruktur server AI yang dapat beroperasi sepenuhnya tanpa koneksi internet. Sistem ini dirancang untuk menjaga keamanan data dan privasi dengan processing lokal yang powerful dan efisien.',
        'project2-title': 'Mengembangkan RAG untuk Pencarian Informasi',
        'project2-desc': 'Implementasi Retrieval-Augmented Generation (RAG) untuk meningkatkan akurasi dan efisiensi pencarian informasi. Teknologi ini menggabungkan kekuatan large language models dengan database knowledge yang terstruktur.',
        'project3-title': 'Implementasi LLM untuk Pembelajaran Berbasis AI',
        'project3-desc': 'Mengintegrasikan Large Language Models ke dalam sistem pembelajaran adaptif yang dapat menyesuaikan konten berdasarkan kebutuhan pengguna. Platform ini memberikan pengalaman belajar yang personal dan interaktif.',
        'project4-title': 'Penerapan AI untuk Pengembangan Server Canggih',
        'project4-desc': 'Memanfaatkan teknologi AI untuk mengoptimalkan performa server, melakukan predictive maintenance, dan automasi pengelolaan resources. Sistem ini meningkatkan efisiensi operasional dan mengurangi downtime.',
        'contact-title': 'Hubungi Kami',
        'contact-subtitle': 'Kami siap membantu Anda',
        'contact-info-title': 'Kontak Pribadi',
        'contact-campus': 'Kampus',
        'form-name': 'Nama',
        'form-email': 'Email / Line ID',
        'form-phone': 'No. Telepon (Opsional)',
        'form-message': 'Pesan',
        'form-submit': 'Kirim Pesan',
        'blog-title': 'Blog',
        'blog-subtitle': 'Inovasi AI Terkini',
        'blog-description': 'Temukan tren dan penelitian terbaru tentang RAG & LLM dalam server AI.',
        'footer-tagline': 'Inovasi Server AI Independent',
        'footer-navigation': 'Navigasi',
        'footer-connect': 'Terhubung',
        'footer-social': 'Sosial Media',
        'footer-campus': 'Kampus',
        'footer-rights': 'Semua hak dilindungi.',
        'footer-made': 'Dibuat dengan',
        'footer-from': 'dari Taiwan'
    },
    en: {
        'nav-home': 'Home',
        'nav-about': 'About',
        'nav-projects': 'Projects',
        'nav-contact': 'Contact',
        'nav-blog': 'Blog',
        'hero-desc': 'Independent AI Server Innovation Without Internet',
        'hero-btn-projects': 'View Projects',
        'hero-btn-contact': 'Contact Us',
        'scroll-text': 'Scroll',
        'about-title': 'About Us',
        'about-desc': 'I am Swanlun 蘇鑽輪, from Shu De University, Department of Computer and Communication 電腦與通訊系, working with Chen Wunan Processor 陳武男, will create an independent AI server.',
        'about-desc-2': 'As Group B, I am ready to collaborate in developing AI server to make it more advanced.',
        'projects-title': 'Our Projects',
        'project1-title': 'Building Independent & Offline AI Server',
        'project1-desc': 'Developing AI server infrastructure that can operate completely without internet connection. This system is designed to maintain data security and privacy with powerful and efficient local processing.',
        'project2-title': 'Developing RAG for Information Retrieval',
        'project2-desc': 'Implementation of Retrieval-Augmented Generation (RAG) to improve accuracy and efficiency of information retrieval. This technology combines the power of large language models with structured knowledge databases.',
        'project3-title': 'Implementing LLM for AI-Based Learning',
        'project3-desc': 'Integrating Large Language Models into adaptive learning systems that can customize content based on user needs. This platform provides personalized and interactive learning experiences.',
        'project4-title': 'Applying AI for Advanced Server Development',
        'project4-desc': 'Leveraging AI technology to optimize server performance, perform predictive maintenance, and automate resource management. This system increases operational efficiency and reduces downtime.',
        'contact-title': 'Contact Us',
        'contact-subtitle': 'We are ready to help you',
        'contact-info-title': 'Personal Contact',
        'contact-campus': 'Campus',
        'form-name': 'Name',
        'form-email': 'Email / Line ID',
        'form-phone': 'Phone Number (Optional)',
        'form-message': 'Message',
        'form-submit': 'Send Message',
        'blog-title': 'Blog',
        'blog-subtitle': 'Latest AI Innovations',
        'blog-description': 'Discover the latest trends and research about RAG & LLM in AI servers.',
        'footer-tagline': 'Independent AI Server Innovation',
        'footer-navigation': 'Navigation',
        'footer-connect': 'Connect',
        'footer-social': 'Social Media',
        'footer-campus': 'Campus',
        'footer-rights': 'All rights reserved.',
        'footer-made': 'Made with',
        'footer-from': 'from Taiwan'
    },
    zh: {
        'nav-home': '首頁',
        'nav-about': '關於',
        'nav-projects': '項目',
        'nav-contact': '聯絡',
        'nav-blog': '部落格',
        'hero-desc': '無需網路的獨立AI伺服器創新',
        'hero-btn-projects': '查看項目',
        'hero-btn-contact': '聯絡我們',
        'scroll-text': '滾動',
        'about-title': '關於我們',
        'about-desc': '我是Swanlun 蘇鑽輪，來自樹德大學，電腦與通訊系，與陳武男 處理器合作，將創建獨立的AI伺服器。',
        'about-desc-2': '我作為B組，準備共同合作開發AI伺服器，使其更加先進。',
        'projects-title': '我們的項目',
        'project1-title': '建構獨立與離線AI伺服器',
        'project1-desc': '開發可完全無需網路連接運行的AI伺服器基礎設施。該系統旨在通過強大且高效的本地處理來維護數據安全和隱私。',
        'project2-title': '開發RAG以進行資訊檢索',
        'project2-desc': '實施檢索增強生成（RAG）以提高資訊檢索的準確性和效率。該技術結合了大型語言模型的力量與結構化知識資料庫。',
        'project3-title': '實施LLM以進行基於AI的學習',
        'project3-desc': '將大型語言模型整合到自適應學習系統中，可根據用戶需求自訂內容。該平台提供個性化和互動式的學習體驗。',
        'project4-title': '應用AI進行進階伺服器開發',
        'project4-desc': '利用AI技術優化伺服器性能、執行預測性維護和自動化資源管理。該系統提高了運營效率並減少了停機時間。',
        'contact-title': '聯絡我們',
        'contact-subtitle': '我們準備為您提供幫助',
        'contact-info-title': '個人聯絡',
        'contact-campus': '校園',
        'form-name': '姓名',
        'form-email': '電子郵件 / Line ID',
        'form-phone': '電話號碼（選填）',
        'form-message': '訊息',
        'form-submit': '發送訊息',
        'blog-title': '部落格',
        'blog-subtitle': '最新AI創新',
        'blog-description': '探索AI伺服器中RAG和LLM的最新趨勢和研究。',
        'footer-tagline': '獨立AI伺服器創新',
        'footer-navigation': '導航',
        'footer-connect': '連接',
        'footer-social': '社交媒體',
        'footer-campus': '校園',
        'footer-rights': '版權所有。',
        'footer-made': '製作於',
        'footer-from': '台灣'
    }
};

let currentLang = localStorage.getItem('language') || 'id';
let currentTheme = localStorage.getItem('theme') || 'dark';
let currentView = localStorage.getItem('view') || 'desktop';

function initializeApp() {
    applyTheme(currentTheme);
    applyLanguage(currentLang);
    applyView(currentView);
    setupEventListeners();
    setupSmoothScroll();
    setupScrollAnimations();
}

function setupEventListeners() {
    const themeToggle = document.getElementById('themeToggle');
    const viewToggle = document.getElementById('viewToggle');
    const menuToggle = document.getElementById('menuToggle');
    const navMenu = document.getElementById('navMenu');
    const langButtons = document.querySelectorAll('.lang-btn');
    const contactForm = document.getElementById('contactForm');
    const navLinks = document.querySelectorAll('.nav-link');

    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }

    if (viewToggle) {
        viewToggle.addEventListener('click', toggleView);
    }
    
    if (menuToggle) {
        menuToggle.addEventListener('click', () => {
            navMenu.classList.toggle('active');
            menuToggle.classList.toggle('active');
        });
    }

    navLinks.forEach(link => {
        link.addEventListener('click', () => {
            if (navMenu) navMenu.classList.remove('active');
            if (menuToggle) menuToggle.classList.remove('active');
        });
    });

    langButtons.forEach(btn => {
        btn.addEventListener('click', () => {
            const lang = btn.getAttribute('data-lang');
            switchLanguage(lang);
        });
    });

    if (contactForm) {
        contactForm.addEventListener('submit', handleFormSubmit);
    }

    window.addEventListener('scroll', handleScroll);
}

function toggleTheme() {
    currentTheme = currentTheme === 'dark' ? 'light' : 'dark';
    applyTheme(currentTheme);
    localStorage.setItem('theme', currentTheme);
}

function applyTheme(theme) {
    if (theme === 'light') {
        document.body.classList.remove('dark-theme');
        document.body.classList.add('light-theme');
    } else {
        document.body.classList.remove('light-theme');
        document.body.classList.add('dark-theme');
    }
}

function toggleView() {
    currentView = currentView === 'desktop' ? 'mobile' : 'desktop';
    applyView(currentView);
    localStorage.setItem('view', currentView);
}

function applyView(view) {
    if (view === 'desktop') {
        document.body.classList.remove('mobile-view');
        document.body.classList.add('desktop-view');
    } else {
        document.body.classList.remove('desktop-view');
        document.body.classList.add('mobile-view');
    }
}

function switchLanguage(lang) {
    currentLang = lang;
    applyLanguage(lang);
    localStorage.setItem('language', lang);

    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.getAttribute('data-lang') === lang) {
            btn.classList.add('active');
        }
    });

    document.documentElement.lang = lang;
}

function applyLanguage(lang) {
    const elements = document.querySelectorAll('[data-id]');
    elements.forEach(el => {
        const key = el.getAttribute('data-id');
        if (translations[lang] && translations[lang][key]) {
            if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                el.placeholder = translations[lang][key];
            } else {
                el.textContent = translations[lang][key];
            }
        }
    });
}

function setupSmoothScroll() {
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                const headerOffset = 80;
                const elementPosition = target.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

                window.scrollTo({
                    top: offsetPosition,
                    behavior: 'smooth'
                });
            }
        });
    });
}

function setupScrollAnimations() {
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    });

    document.querySelectorAll('.project-card, .contact-item').forEach(el => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(30px)';
        el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(el);
    });
}

function handleScroll() {
    const header = document.querySelector('.header');
    if (header) {
        if (window.scrollY > 50) {
            header.style.boxShadow = '0 4px 20px rgba(255, 0, 64, 0.2)';
        } else {
            header.style.boxShadow = 'none';
        }
    }
}

async function handleFormSubmit(e) {
    e.preventDefault();
    
    const form = e.target;
    const submitBtn = form.querySelector('button[type="submit"]');
    const btnText = submitBtn.querySelector('.btn-text');
    const btnLoading = submitBtn.querySelector('.btn-loading');
    const formStatus = document.getElementById('formStatus');
    
    const formData = {
        name: form.name.value,
        email: form.email.value,
        phone: form.phone.value || 'Tidak ada',
        message: form.message.value
    };
    
    btnText.style.display = 'none';
    btnLoading.style.display = 'inline';
    submitBtn.disabled = true;
    formStatus.style.display = 'none';
    
    try {
        const emailBody = `
Nama: ${formData.name}
Email/Line: ${formData.email}
No. Telepon: ${formData.phone}

Pesan:
${formData.message}

---
Dikirim dari Swanlun AI Profile Website
        `.trim();

        const mailtoLink = `mailto:sherinchan205@gmail.com?subject=Pesan dari ${encodeURIComponent(formData.name)}&body=${encodeURIComponent(emailBody)}`;
        
        window.location.href = mailtoLink;
        
        setTimeout(() => {
            formStatus.textContent = currentLang === 'id' ? 'Email client Anda akan terbuka. Silakan kirim email untuk melanjutkan.' :
                                    currentLang === 'en' ? 'Your email client will open. Please send the email to continue.' :
                                    '您的電子郵件客戶端將打開。請發送電子郵件以繼續。';
            formStatus.className = 'form-status success';
            
            form.reset();
            
            btnText.style.display = 'inline';
            btnLoading.style.display = 'none';
            submitBtn.disabled = false;
        }, 500);
        
    } catch (error) {
        console.error('Error:', error);
        formStatus.textContent = currentLang === 'id' ? 'Terjadi kesalahan. Silakan coba lagi atau hubungi langsung via email.' :
                                currentLang === 'en' ? 'An error occurred. Please try again or contact directly via email.' :
                                '發生錯誤。請重試或直接通過電子郵件聯繫。';
        formStatus.className = 'form-status error';
        
        btnText.style.display = 'inline';
        btnLoading.style.display = 'none';
        submitBtn.disabled = false;
    }
}

document.addEventListener('DOMContentLoaded', initializeApp);
